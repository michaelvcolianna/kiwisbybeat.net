---
import { getCollection } from 'astro:content'

const posts = await getCollection('posts')
const navigation = posts.filter(post => !post.data.set && post.slug !== 'index').sort((a, b) => {
  if (a.data.series && b.data.series) {
    if (a.data.series < b.data.series) {
      return -1
    }
    else if (a.data.series > b.data.series) {
      return 1
    }
  }

  return 0
})
---

<header class="site-header">
  <a href="/" class="branding">
    Kiwis by Beat!
  </a>

  <nav
    data-todo="Class toggle based on menu open"
    aria-labelledby="label-series-nav"
    class=""
  >
    <button
      data-todo="On click handler"
      aria-haspopup="true"
      id="label-series-nav"
      class="toggle-button"
    >
      <span class="sr-only">Comics menu</span>
    </button>

    <div data-todo="Aria hidden toggle">
      <ul>
        {navigation.map(nav => (
          <li>
            <a href={`/${nav.slug}`}>{nav.data.title}</a>
          </li>
        ))}
      </ul>
    </div>
  </nav>
</header>
